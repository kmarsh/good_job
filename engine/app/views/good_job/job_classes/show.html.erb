<div class="float-right">
  <%= link_to "Enqueue New Job", new_job_class_job_path(job_class_id: @job_class), class: "btn btn-primary" %>
</div>

<h1><%= @job_class %></h1>
<div class="text-muted"><%= @job_class.description %></div>

<hr />

<h2 class="h4">Last Runs</h2>
<div class="card my-3">
  <div class="table-responsive">
    <table class="table card-table table-bordered table-hover table-sm mb-0">
      <thead>
        <th>GoodJob ID</th>
        <th>ActiveJob ID</th>
        <th>Scheduled At</th>
        <th>Finished At</th>
        <th>Error</th>
        <th>Params</th>
      </thead>
      <tbody>
        <% @jobs.each do |job| %>
          <tr id="<%= dom_id(job) %>">
            <td><%= link_to job.id, active_job_path(job.serialized_params['job_id'], anchor: dom_id(job)) %></td>
            <td><%= link_to job.serialized_params['job_id'], active_job_path(job.serialized_params['job_id']) %></td>
            <td><%= job.scheduled_at || job.created_at %></td>
            <td><%= job.finished_at %></td>
            <td><%= job.error %></td>
            <td><pre><%= JSON.pretty_generate(job.serialized_params) %></pre></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>

